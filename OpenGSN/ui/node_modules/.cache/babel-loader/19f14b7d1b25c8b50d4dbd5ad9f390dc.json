{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { UrlJsonRpcProvider } from \"./url-json-rpc-provider\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nexport class CloudflareProvider extends UrlJsonRpcProvider {\n  static getApiKey(apiKey) {\n    if (apiKey != null) {\n      logger.throwArgumentError(\"apiKey not supported for cloudflare\", \"apiKey\", apiKey);\n    }\n\n    return null;\n  }\n\n  static getUrl(network, apiKey) {\n    let host = null;\n\n    switch (network.name) {\n      case \"homestead\":\n        host = \"https://cloudflare-eth.com/\";\n        break;\n\n      default:\n        logger.throwArgumentError(\"unsupported network\", \"network\", arguments[0]);\n    }\n\n    return host;\n  }\n\n  perform(method, params) {\n    const _super = Object.create(null, {\n      perform: {\n        get: () => super.perform\n      }\n    });\n\n    return __awaiter(this, void 0, void 0, function* () {\n      // The Cloudflare provider does not support eth_blockNumber,\n      // so we get the latest block and pull it from that\n      if (method === \"getBlockNumber\") {\n        const block = yield _super.perform.call(this, \"getBlock\", {\n          blockTag: \"latest\"\n        });\n        return block.number;\n      }\n\n      return _super.perform.call(this, method, params);\n    });\n  }\n\n}","map":{"version":3,"sources":["../src.ts/cloudflare-provider.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAS,kBAAT,QAAmC,yBAAnC;AAEA,SAAS,MAAT,QAAuB,uBAAvB;AACA,SAAS,OAAT,QAAwB,YAAxB;AACA,MAAM,MAAM,GAAG,IAAI,MAAJ,CAAW,OAAX,CAAf;AAEA,OAAM,MAAO,kBAAP,SAAkC,kBAAlC,CAAoD;AAEtC,SAAT,SAAS,CAAC,MAAD,EAAY;AACxB,QAAI,MAAM,IAAI,IAAd,EAAoB;AAChB,MAAA,MAAM,CAAC,kBAAP,CAA0B,qCAA1B,EAAiE,QAAjE,EAA2E,MAA3E;AACH;;AACD,WAAO,IAAP;AACH;;AAEY,SAAN,MAAM,CAAC,OAAD,EAAmB,MAAnB,EAA+B;AACxC,QAAI,IAAI,GAAG,IAAX;;AACA,YAAQ,OAAO,CAAC,IAAhB;AACI,WAAK,WAAL;AACI,QAAA,IAAI,GAAG,6BAAP;AACA;;AACJ;AACG,QAAA,MAAM,CAAC,kBAAP,CAA0B,qBAA1B,EAAiD,SAAjD,EAA4D,SAAS,CAAC,CAAD,CAArE;AALP;;AAQA,WAAO,IAAP;AACH;;AAEK,EAAA,OAAO,CAAC,MAAD,EAAiB,MAAjB,EAA4B;;;;;;;;AACrC;AACA;AACA,UAAI,MAAM,KAAK,gBAAf,EAAiC;AAC7B,cAAM,KAAK,GAAG,MAAM,MAAA,CAAM,OAAN,CAAa,IAAb,CAAa,IAAb,EAAc,UAAd,EAA0B;AAAE,UAAA,QAAQ,EAAE;AAAZ,SAA1B,CAApB;AACA,eAAO,KAAK,CAAC,MAAb;AACH;;AAED,aAAO,MAAA,CAAM,OAAN,CAAa,IAAb,CAAa,IAAb,EAAc,MAAd,EAAsB,MAAtB,CAAP;AACH,K;AAAA;;AA/BqD","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { UrlJsonRpcProvider } from \"./url-json-rpc-provider\";\r\nimport { Logger } from \"@ethersproject/logger\";\r\nimport { version } from \"./_version\";\r\nconst logger = new Logger(version);\r\nexport class CloudflareProvider extends UrlJsonRpcProvider {\r\n    static getApiKey(apiKey) {\r\n        if (apiKey != null) {\r\n            logger.throwArgumentError(\"apiKey not supported for cloudflare\", \"apiKey\", apiKey);\r\n        }\r\n        return null;\r\n    }\r\n    static getUrl(network, apiKey) {\r\n        let host = null;\r\n        switch (network.name) {\r\n            case \"homestead\":\r\n                host = \"https://cloudflare-eth.com/\";\r\n                break;\r\n            default:\r\n                logger.throwArgumentError(\"unsupported network\", \"network\", arguments[0]);\r\n        }\r\n        return host;\r\n    }\r\n    perform(method, params) {\r\n        const _super = Object.create(null, {\r\n            perform: { get: () => super.perform }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // The Cloudflare provider does not support eth_blockNumber,\r\n            // so we get the latest block and pull it from that\r\n            if (method === \"getBlockNumber\") {\r\n                const block = yield _super.perform.call(this, \"getBlock\", { blockTag: \"latest\" });\r\n                return block.number;\r\n            }\r\n            return _super.perform.call(this, method, params);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=cloudflare-provider.js.map"]},"metadata":{},"sourceType":"module"}